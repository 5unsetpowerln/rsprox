var l=Object.defineProperty;var p=(t,e,r)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var i=(t,e,r)=>p(t,typeof e!="symbol"?e+"":e,r);import{w as y}from"./index.OYcueU4I.js";function D(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function u(t,e=!1){const r=D(),s=`_${r}`;return Object.defineProperty(window,s,{value:n=>(e&&Reflect.deleteProperty(window,s),t==null?void 0:t(n)),writable:!1,configurable:!0}),r}async function O(t,e={}){return new Promise((r,s)=>{const n=u(d=>{r(d),Reflect.deleteProperty(window,`_${o}`)},!0),o=u(d=>{s(d),Reflect.deleteProperty(window,`_${n}`)},!0);window.__TAURI_IPC__({cmd:t,callback:n,error:o,...e})})}async function h(t){return O("tauri",t)}async function w(t,e){return h({__tauriModule:"Event",message:{cmd:"unlisten",event:t,eventId:e}})}async function W(t,e,r){return h({__tauriModule:"Event",message:{cmd:"listen",event:t,windowLabel:e,handler:u(r)}}).then(s=>async()=>w(t,s))}var a;(function(t){t.WINDOW_RESIZED="tauri://resize",t.WINDOW_MOVED="tauri://move",t.WINDOW_CLOSE_REQUESTED="tauri://close-requested",t.WINDOW_CREATED="tauri://window-created",t.WINDOW_DESTROYED="tauri://destroyed",t.WINDOW_FOCUS="tauri://focus",t.WINDOW_BLUR="tauri://blur",t.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",t.WINDOW_THEME_CHANGED="tauri://theme-changed",t.WINDOW_FILE_DROP="tauri://file-drop",t.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",t.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",t.MENU="tauri://menu",t.CHECK_UPDATE="tauri://update",t.UPDATE_AVAILABLE="tauri://update-available",t.INSTALL_UPDATE="tauri://update-install",t.STATUS_UPDATE="tauri://update-status",t.DOWNLOAD_PROGRESS="tauri://update-download-progress"})(a||(a={}));async function _(t,e){return W(t,null,e)}class g{constructor(e){i(this,"id");i(this,"headers");i(this,"uri");i(this,"method");i(this,"version");i(this,"body");this.id=e.id,this.headers=e.headers,this.uri=e.uri,this.method=e.method,this.version=e.version,this.body=e.body}get_id(){return this.id}get_method(){return this.method}get_uri(){return this.uri}get_headers(){return this.headers}get_version(){return this.version}get_body(){return this.body}}class f{constructor(e){i(this,"id");i(this,"headers");i(this,"status");i(this,"version");i(this,"body");this.id=e.id,this.headers=e.headers,this.status=e.status,this.body=e.body,this.version=e.version}get_id(){return this.id}get_headers(){return this.headers}get_status(){return this.status}get_version(){return this.version}get_body(){return this.body}}const c=y(new Map);async function R(){await _("proxy_send_request_to_frontend",t=>{const e=t.payload,r=JSON.parse(e),s=new g(r);c.update(n=>{const o={request:s,response:void 0};return n.set(s.get_id(),o),n})}),await _("proxy_send_response_to_frontend",t=>{const e=t.payload,r=JSON.parse(e),s=new f(r);c.update(n=>{const o=n.get(s.get_id());return o.response=s,n.set(s.get_id(),o),n})})}export{c as h,R as p};
