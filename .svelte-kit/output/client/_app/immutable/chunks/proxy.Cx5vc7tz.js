var g=Object.defineProperty;var y=(e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var r=(e,t,s)=>y(e,typeof t!="symbol"?t+"":t,s);import{w as f}from"./index.B3q30SsR.js";const R=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function w(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function u(e,t=!1){const s=w(),n=`_${s}`;return Object.defineProperty(window,n,{value:i=>(t&&Reflect.deleteProperty(window,n),e==null?void 0:e(i)),writable:!1,configurable:!0}),s}async function D(e,t={}){return new Promise((s,n)=>{const i=u(o=>{s(o),Reflect.deleteProperty(window,`_${a}`)},!0),a=u(o=>{n(o),Reflect.deleteProperty(window,`_${i}`)},!0);window.__TAURI_IPC__({cmd:e,callback:i,error:a,...t})})}async function c(e){return D("tauri",e)}async function O(e,t){return c({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function W(e,t,s){return c({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:u(s)}}).then(n=>async()=>O(e,n))}var d;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress"})(d||(d={}));async function h(e,t){return W(e,null,t)}const S=[{id:"0",text:"UTF_8"},{id:"1",text:"SHIFT_JIS"}];class _{constructor(t){r(this,"charset");r(this,"str");r(this,"raw");this.charset=t.charset,this.str=t.str,this.raw=t.raw}get_str(){return this.str}get_raw(){return this.raw}get_charset(){return this.charset}get_length(){return this.raw.length}}class p{constructor(t){r(this,"array");this.array=t}find_by_name(t){return this.array.find(s=>s.name===t)}content_extension(){const t=this.find_by_name("content-type");if(t===void 0)return;const s=t.value.split(";")[0];if(s.includes("html"))return"html";if(s.includes("javascript"))return"javascript";if(s.includes("json"))return"json"}get_array(){return this.array}}class m{constructor(t){r(this,"id");r(this,"headers");r(this,"uri");r(this,"method");r(this,"version");r(this,"body");this.id=t.id,this.uri=t.uri,this.headers=new p(t.headers),this.method=t.method,this.version=t.version,this.body=new _(t.body)}get_id(){return this.id}get_method(){return this.method}get_uri(){return this.uri}get_headers(){return this.headers}get_version(){return this.version}get_body(){return this.body}}class I{constructor(t){r(this,"id");r(this,"headers");r(this,"status");r(this,"version");r(this,"body");this.id=t.id,this.headers=new p(t.headers),this.status=t.status,this.body=new _(t.body),this.version=t.version}get_id(){return this.id}get_headers(){return this.headers}get_status(){return this.status}get_version(){return this.version}get_body(){return this.body}}const l=f([]);async function E(e){const t=[];for(const s of e)s.request!==void 0&&(s.response!==void 0?t.push({id:s.id,method:s.request.get_method(),uri:s.request.get_uri(),status:String(s.response.get_status()),length:String(s.response.get_body().get_length())}):t.push({id:s.id,method:s.request.get_method(),uri:s.request.get_uri(),status:"",length:""}));return t}function b(e){const t=[];for(const s in e){const n=s.charAt(0).toUpperCase()+s.slice(1);t.push({key:s,value:n})}return t}async function C(){await h("proxy_send_request_to_frontend",e=>{const t=e.payload,s=JSON.parse(t),n=new m(s);l.update(i=>(i.push({id:n.get_id(),request:n,response:void 0}),i))}),await h("proxy_send_response_to_frontend",e=>{const t=e.payload,s=JSON.parse(t),n=new I(s);l.update(i=>{const a=i.findIndex(o=>o.id===n.get_id());return i[a].response=n,i})})}export{E as a,b,S as c,R as g,l as h,C as p};
